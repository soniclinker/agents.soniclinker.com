"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{6630:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var a=t(37876),l=t(14232),r=t(43598),n=t(65259),i=t(16821);let o=e=>{let{children:s,placeholder:t,value:l,setValue:r,...n}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",htmlFor:s,children:s}),(0,a.jsx)("input",{id:s,className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none",placeholder:t,value:l,onChange:e=>r(e.target.value)})]})},c=e=>{let{children:s}=e;return(0,a.jsx)("p",{className:"text-xs text-slate-500",children:s})},d=e=>{let{children:s,onClick:t,disabled:l}=e;return(0,a.jsx)("button",{className:"w-fit bg-indigo-700 text-white p-2 rounded-lg text-xs px-4 py-2 ml-auto cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-400",onClick:t,disabled:l,children:s})},u=e=>{var s;let{setStepsData:t,setCurrentStep:u}=e,[x,h]=(0,l.useState)(""),[m,p]=(0,l.useState)(!1),[f,j]=(0,l.useState)(null),[g,v]=(0,l.useState)(""),b=null===(s=r.A.current())||void 0===s?void 0:s.id,N=e=>RegExp("^(https?:\\/\\/)?((([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})|localhost|\\d{1,3}(\\.\\d{1,3}){3})(\\:\\d+)?(\\/[-a-zA-Z0-9@:%_+.~#?&//=]*)?(\\?[;&a-zA-Z0-9%_+.~#?&//=]*)?(\\#[-a-zA-Z0-9_]*)?$").test(e),w=async()=>{if(!x||!N(x)){j("Please enter a website");return}j(null),p(!0);let{data:e,error:s}=await n.A.doGet({path:"/orgs/".concat(r.A.current().id,"/aeo/querygen-suggestions?website=").concat(x)});if(s){j("Something went wrong. Please try again."),p(!1);return}e&&v(e.task_id)},y=(0,l.useCallback)(async e=>{let{data:s,error:a}=await n.A.doGet({path:"/orgs/".concat(r.A.current().id,"/aeo/tasks/").concat(e)});if(a){j("Something went wrong"),p(!1);return}if(s){let e=s.task.data.suggestions;t(s=>({...s,...e,website:x})),p(!1),u(2)}},[t,u,x]);return(0,l.useEffect)(()=>{let e=i.A.getInstance(b),s=e=>{"querygen_helper_task_status"===e.type&&e.data&&e.data.task_id===g&&("completed"===e.data.status?y(g):"failed"===e.data.status&&j("Task failed"))};return e.on("message",s),()=>{e.off("message",s)}},[b,y,g]),(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-4",children:[(0,a.jsx)(o,{placeholder:"https://example.com",value:x,setValue:h,children:"Website URL"}),(0,a.jsx)(c,{children:"Enter the full URL of the website you want to track"}),f&&(0,a.jsx)("p",{className:"text-sm text-red-500 font-medium",children:f}),(0,a.jsx)(d,{onClick:w,disabled:m,children:m?"Analyzing...":"Next"})]})};var x=t(21976);let h=e=>{let{value:s,onRemove:t}=e;return(0,a.jsxs)("div",{className:"w-fit flex items-center gap-2 bg-[#EDF1FE] rounded px-3 py-1",children:[(0,a.jsx)("span",{className:"text-indigo-600 text-xs font-medium",children:s}),(0,a.jsx)(x.rhw,{className:"text-[#93A2B7] cursor-pointer",onClick:t})]})},m=e=>{let{placeholder:s,value:t,setValue:l,onAdd:r,count:n=0}=e;return(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("input",{className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none w-full",placeholder:s,value:t,onChange:e=>l(e.target.value)}),(0,a.jsx)("button",{onClick:r,disabled:!t||""===t.trim()||!!(n&&n>=10),className:"bg-[#E1E7EF] rounded px-3 py-1 text-xs text-[#64748A] cursor-pointer disabled:cursor-not-allowed",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,a.jsx)(x.G7L,{className:"text-[#93A2B7] cursor-pointer"}),(0,a.jsx)("span",{children:"Add"})]})})]})},p=e=>{let{placeholder:s,value:t,setValue:l}=e;return(0,a.jsx)("input",{className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none w-full",placeholder:s,value:t,onChange:e=>l(e.target.value)})},f=e=>{let{stepsData:s,setStepsData:t,setCurrentStep:r}=e,[n,i]=(0,l.useState)(""),o=e=>{t(s=>({...s,search_queries:s.search_queries.filter((s,t)=>t!==e)}))};return(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-8",children:[(0,a.jsxs)("p",{className:"flex text-sm",children:["Analysis for \xa0",(0,a.jsx)("a",{href:s.website,className:"text-indigo-600 cursor-pointer",children:s.website})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"min-w-44",children:[(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Name"}),(0,a.jsx)(c,{children:"Your project name"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-5 w-full",children:(0,a.jsx)(p,{placeholder:"Name",value:s.name,setValue:e=>t(s=>({...s,name:"string"==typeof e?e:s.name}))})})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"min-w-44",children:[(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Topics"}),(0,a.jsx)(c,{children:"You can add up to 10 topics"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.search_queries.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>o(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users search your product on Google",value:n,setValue:i,onAdd:()=>{n&&t(e=>({...e,search_queries:[...e.search_queries,n]})),i("")},count:s.search_queries.length})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>r(1),children:"Back"})}),(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>r(3),children:"Next"})})]})]})},j=e=>{let{stepsData:s,setStepsData:t,setCurrentStep:r}=e,[n,i]=(0,l.useState)(""),[o,u]=(0,l.useState)(""),[x,p]=(0,l.useState)(""),f=e=>{t(s=>({...s,user_personas:s.user_personas.filter((s,t)=>t!==e)}))},j=e=>{t(s=>({...s,brand_names:s.brand_names.filter((s,t)=>t!==e)}))},g=e=>{t(s=>({...s,domains:s.domains.filter((s,t)=>t!==e)}))};return(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"User Persona"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.user_personas.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>f(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users search your product on Google",value:n,setValue:i,onAdd:()=>{n&&t(e=>({...e,user_personas:[...e.user_personas,n]})),i("")}})})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"min-w-44 max-w-44",children:[(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Your Alternative Domains Or Subdomains"}),(0,a.jsx)(c,{children:"(Do not include https;//)"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.domains.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>g(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users type your Brand Name in different ways",value:o,setValue:u,onAdd:()=>{o&&t(e=>({...e,domains:[...e.domains,o]})),u("")}})})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Brand names & Alternatives"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.brand_names.map((e,s)=>(0,a.jsx)(h,{value:e,onRemove:()=>j(s)},s))}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{placeholder:"How Users type your Brand Name in different ways",value:x,setValue:p,onAdd:()=>{x&&t(e=>({...e,brand_names:[...e.brand_names,x]})),p("")}})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>r(2),children:"Back"})}),(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>r(4),children:"Next"})})]})]})};var g=t(49034),v=t(89099),b=t(74562);let N=e=>{let{stepsData:s,setStepsData:t,setCurrentStep:i}=e,[o,c]=(0,l.useState)(!1),[u,x]=(0,l.useState)(null),[h,m]=(0,l.useState)([]),f=(0,v.useRouter)(),j=async()=>{let{data:e,error:s}=await n.A.doGet({path:"/orgs/".concat(r.A.current().id,"/aeo/workflows")});if(s){x("Error fetching workflows"),console.log(s.message);return}e&&m(e.workflows.filter(e=>"qgen"===e.type))},g=async()=>{var e;x(null);let t=s.name;if(5>Number(s.num_queries)){x("Number of queries cannot be less than 5");return}if(Number(s.num_queries)>50){x("Number of queries cannot be more than 50");return}let a={website:s.website,keywords:(null==s?void 0:s.search_queries.join("\n"))||"",user_persona:(null==s?void 0:s.user_personas.join("\n"))||"",brand:(null==s?void 0:s.brand_names.join(", "))||"",location:(null==s?void 0:s.country_code)||"",domains:(null==s?void 0:s.domains.join(", "))||"",num_queries:(null==s?void 0:s.num_queries.toString())||""},l={name:t,data:{workflow:null===(e=h[0])||void 0===e?void 0:e.id,args:a}};c(!0);let i=await n.A.doPost({path:"/orgs/".concat(r.A.current().id,"/querysets"),data:l});if(i.error){x(i.error.message);return}if(i.data){let{id:e}=i.data;if(e){let{data:s,error:a}=await n.A.doPost({path:"/orgs/".concat(r.A.current().id,"/querysets/").concat(e),data:{action:"start_task"}});a&&x(a.message),s&&(r.A.setCurrentAeoProject({id:e,name:t,org_id:r.A.current().id}),f.push("/aeo/manage?id=".concat(e)),b.A.hide())}}c(!1)};return(0,l.useEffect)(()=>{j()},[]),(0,a.jsxs)("div",{className:"p-9 border-[0.8px] rounded-lg border-[#DCDCDC] m-10 flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Target Customers Geography"})}),(0,a.jsx)(w,{country:s.country_code,setStepsData:t})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"min-w-44",children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:"Number of Questions to Generate"})}),(0,a.jsx)(p,{placeholder:"Number of Questions to Generate",value:s.num_queries.toString(),setValue:e=>{t(s=>({...s,num_queries:Number(e)}))}})]}),u&&(0,a.jsx)("div",{className:"text-red-500",children:u}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:()=>i(3),children:"Back"})}),(0,a.jsx)("div",{children:(0,a.jsx)(d,{onClick:g,disabled:o,children:"Submit"})})]})]})},w=e=>{let{country:s,setStepsData:t}=e,r=(0,g.oj)(),[n,i]=(0,l.useState)(s);return(0,a.jsx)("select",{name:"country",id:"country",value:n,onChange:e=>{i(e.target.value),t(s=>({...s,country_code:e.target.value}))},className:"border-[0.8px] border-[#E5E5E5] rounded px-4 py-2 text-xs outline-none w-full",children:Object.values(r).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})},y=e=>{let{currentStep:s=1,onStepClick:t}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:Array.from({length:4},(e,t)=>(0,a.jsx)(l.Fragment,{children:(0,a.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center font-semibold transition-colors duration-700 cursor-pointer z-10 ".concat(s>=t+1?"bg-indigo-600 text-white":"bg-gray-300 text-black"),children:(0,a.jsx)("button",{className:"w-full h-full text-xs flex items-center justify-center",children:t+1})})},t))}),(0,a.jsx)("div",{className:"h-[1px] w-full transition-all duration-700 bg-gray-300 absolute top-[50%]",children:(0,a.jsx)("div",{className:"h-full transition-all duration-500 ease-in-out bg-indigo-600",style:{width:"".concat((s-1)*33.333333333333336,"%")}})})]})},_=()=>{let[e,s]=(0,l.useState)(1),[t,r]=(0,l.useState)({search_queries:[],user_personas:[],brand_names:[],country_code:"",domains:[],num_queries:0,name:"",website:""});return(0,a.jsxs)("div",{className:"w-full flex flex-col gap-8 items-center justify-center",children:[(0,a.jsx)("div",{className:"w-full flex justify-center items-center sticky top-0 pb-6 bg-white",children:(0,a.jsx)("div",{className:"lg:max-w-[60%] w-full",children:(0,a.jsx)(y,{currentStep:e,onStepClick:e=>{s(e)}})})}),(0,a.jsx)("div",{className:"w-full lg:max-w-[66%]",children:(0,a.jsx)(k,{currentStep:e,stepsData:t,setCurrentStep:s,setStepsData:r})})]})},k=e=>{let{stepsData:s,currentStep:t,setCurrentStep:l,setStepsData:r}=e;return(0,a.jsx)("div",{className:"w-full mt-4 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h1",{className:"text-2xl text-center font-bold",children:"Let's get you started"}),(0,a.jsx)("p",{className:"text-sm text-[#64748A] font-medium text-center pb-4",children:"Please help us with a few answers to provide the best experience"}),(0,a.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto",children:[1===t&&(0,a.jsx)(u,{setStepsData:r,setCurrentStep:l}),2===t&&(0,a.jsx)(f,{stepsData:s,setStepsData:r,setCurrentStep:l}),3===t&&(0,a.jsx)(j,{stepsData:s,setStepsData:r,setCurrentStep:l}),4===t&&(0,a.jsx)(N,{stepsData:s,setStepsData:r,setCurrentStep:l})]})]})})}},16821:(e,s,t)=>{t.d(s,{A:()=>u});var a=t(42874),l=t(80498),r=t(3176),n=t(65259),i=t(20318);let o=()=>r.A.apiUrl+"/connect/update";class c{static getInstance(e){return(0,a._)(c,c,d)||(0,l._)(c,c,d,new c(e)),(0,a._)(c,c,d)}setOrgId(e){this.orgId=e}on(e,s){this.listener.add(s),"not_connected"===this.status&&this.connect()}off(e){this.listener.remove(e)}setupPing(){setTimeout(()=>{this.socket&&this.socket.readyState===WebSocket.OPEN&&(this.socket.send("{}"),this.setupPing())},3e4)}connect(){if("not_connected"!==this.status)return;this.changeStatus("connecting");let e=[],s=n.A.token();s&&e.push("access_token="+s),this.orgId&&e.push("org_id="+this.orgId);let t=e.length?"?"+e.join("&"):"";this.socket=new WebSocket(o()+t),this.socket.addEventListener("open",()=>{this.changeStatus("connected"),this.setupPing()}),this.socket.addEventListener("close",()=>{this.changeStatus("not_connected"),console.log("WebSocket closed")}),this.socket.addEventListener("message",e=>{try{let s=JSON.parse(e.data);this.listener.trigger(s)}catch(s){console.error("Invalid WebSocket message:",e.data)}})}send(e){this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify(e))}disconnect(){if(this.socket)try{this.socket.close()}catch(e){console.error("Error closing WebSocket:",e)}}changeStatus(e){this.status!==e&&(this.status=e)}constructor(e){this.status="not_connected",this.socket=null,this.orgId=e,this.listener=new i.A}}var d={writable:!0,value:null};let u=c}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3332],{16760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(36637)}])},34648:(e,t,s)=>{"use strict";s.d(t,{g:()=>a});let a=e=>{let t=(Math.floor(Date.now())-e)/1e3,s={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(let e in s){let a=Math.floor(t/s[e]);if(a>0)return"".concat(a," ").concat(e).concat(1!==a?"s":""," ago")}return"Just now"}},36637:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>q});var a=s(37876),l=s(65259),r=s(43598),n=s(95551);let c=(0,n.A)("mail-check",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]),i=(0,n.A)("chart-no-axes-combined",[["path",{d:"M12 16v5",key:"zza2cw"}],["path",{d:"M16 14v7",key:"1g90b9"}],["path",{d:"M20 10v11",key:"1iqoj0"}],["path",{d:"m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15",key:"1fw8x9"}],["path",{d:"M4 18v3",key:"1yp0dc"}],["path",{d:"M8 14v7",key:"n3cwzv"}]]);var o=s(14232);let d=()=>{let[e,t]=(0,o.useState)(null),s=async()=>{try{let{data:e,error:s}=await l.A.doGet({path:"/orgs/".concat(r.A.currentId(),"/data/stats")});if(s){console.error("Error fetching stats:",s);return}e&&e.stats&&t(e.stats)}catch(e){console.error("Error fetching stats:",e)}};return(0,o.useEffect)(()=>{s()},[]),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(x,{label:"Active Conversations",value:"".concat((null==e?void 0:e.conversations)||0)}),(0,a.jsx)(x,{label:"New Leads",value:"".concat((null==e?void 0:e.leads)||0)}),(0,a.jsx)(x,{label:"Meetings Scheduled",value:"".concat((null==e?void 0:e.bookings)||0)}),(0,a.jsx)(x,{label:"Lead Conversion Rate",value:"".concat((null==e?void 0:e.conversion_rate)||0,"%")})]})},x=e=>{let{label:t,value:s}=e;return(0,a.jsxs)("div",{className:"w-full flex flex-col gap-4 p-4 border-dashboard rounded bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-[#737373] font-normal text-sm",children:t}),(0,a.jsx)("span",{children:(0,a.jsx)(c,{className:"textPrimary w-4 h-4 "})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-semibold text-[#262626]",children:s}),(0,a.jsxs)("span",{className:"text-[#737373] flex items-center",children:[(0,a.jsx)("span",{children:"0"}),(0,a.jsx)(i,{className:"w-4 h-4"})]})]})]})};var m=s(48230),h=s.n(m),u=s(75683);let f=()=>{let[e,t]=(0,o.useState)([]),s=r.A.currentId(),n=(0,o.useCallback)(async()=>{try{let{data:e,error:a}=await l.A.doGet({path:"orgs/".concat(s,"/data/threads?category=text&priority=high")});if(a){console.error("Error fetching threads:",a);return}if(e&&e.threads){let s=e.threads.map(e=>{var t;let s=JSON.parse(e.data);return{id:e.id,info:null===(t=s.about)||void 0===t?void 0:t.purpose}});t(s)}}catch(e){console.error("Error fetching threads:",e)}},[s]);return(0,o.useEffect)(()=>{n()},[s,n]),(0,a.jsxs)("div",{className:"w-full flex flex-col gap-2 py-6 px-4 border-dashboard rounded bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-black font-bold text-sm",children:"Urgent Actions"}),(0,a.jsxs)("span",{className:"text-rose-700 font-normal bg-rose-100 rounded-[20px] inline-flex justify-center items-center gap-2.5 px-3 py-0.5 text-xs",children:[e.length," new"]})]}),0===e.length&&(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center my-auto",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bgSoftBlue flex justify-center items-center",children:(0,a.jsx)(u.qVL,{className:"w-6 h-6 text-[#4F46E4]"})}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-[#A2A2A2] text-xs font-medium",children:"No Actions needed right now"})})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-auto scrollbar-hidden",children:e.map(e=>(0,a.jsx)(g,{id:e.id,info:e.info},e.id))})]})},g=e=>{let{id:t,info:s}=e;return(0,a.jsxs)("div",{className:"w-full px-2 py-1.5 mt-2.5 bg-[#F7F9FB] rounded flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,a.jsx)("span",{children:(0,a.jsx)(u.qVL,{className:"text-[#E01D48] text-xs"})}),(0,a.jsx)("span",{className:"text-[#737373] text-xs",children:s})]}),(0,a.jsx)(h(),{href:{pathname:"/messages",query:{thread_id:t}},children:(0,a.jsx)("button",{className:"text-[10px] text-[#737373] cursor-pointer",children:"Visit"})})]})};var p=s(88564);let j=()=>(0,a.jsxs)("div",{className:"w-full flex flex-col gap-2 py-6 px-4 border-dashboard rounded bg-white",children:[(0,a.jsx)("span",{className:"text-black font-bold text-sm",children:"Bot settings"}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center my-auto mt-4 h-full",children:[(0,a.jsx)(h(),{href:{pathname:"/settings",query:{tab:"bot-management"}},children:(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bgSoftBlue flex justify-center items-center",children:(0,a.jsx)(p.ikl,{className:"w-6 h-6 text-[#4F46E4]"})})}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-[#A2A2A2] text-xs font-medium",children:"Configure your Bot Settings"})}),(0,a.jsx)(h(),{href:{pathname:"/settings",query:{tab:"bot-management"}},children:(0,a.jsx)("div",{className:"w-30 h-6 bgSoftBlue rounded mt-4 flex justify-center items-center",children:(0,a.jsx)("span",{className:"text-[#4F46E4] text-[10px] font-medium",children:"+ Setup Bot"})})})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-auto scrollbar-hidden"})]});var b=s(59081);let v=()=>(0,a.jsxs)("div",{className:"w-full flex flex-col gap-2 py-6 px-4 border-dashboard rounded bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between text-center items-center",children:[(0,a.jsx)("span",{className:"text-black font-bold text-sm",children:"Connect Channels"}),(0,a.jsx)(h(),{href:{pathname:"/settings",query:{tab:"channels-management"}},children:(0,a.jsx)("button",{className:"text-[#737373] text-xs font-normal cursor-pointer",children:"View More"})})]}),(0,a.jsx)(b.A,{foryou:!0})]}),N=e=>{let{children:t,label:s,buttons:l,currentPriority:r,setCurrentPriority:n,page:c}=e;return(0,a.jsxs)("div",{className:"w-full flex flex-col gap-2 py-6 px-4 border-dashboard rounded bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-black font-bold text-sm",children:s}),(0,a.jsx)(h(),{href:"/".concat(c),className:"text-[#4F46E4] text-xs font-normal",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:l.map(e=>(0,a.jsx)(y,{label:e,isActive:e===l[r],handleClick:()=>{n(l.indexOf(e))}},e))}),(0,a.jsx)("hr",{className:"border-dashboard mt-1"}),(0,a.jsx)("div",{className:"max-h-64 overflow-auto scrollbar-hidden flex flex-col gap-2 w-full",children:t})]})},y=e=>{let{label:t,isActive:s,handleClick:l}=e;return(0,a.jsx)("button",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1.5 mt-2  text-xs font-semibold ".concat(s?"bg-[#4F46E4] text-white":"bg-[#F0F4F8] text-[#64748A]"," rounded cursor-pointer"),onClick:l,children:t})};var w=s(54587),k=s.n(w),A=s(43666),E=s(89099),C=s(34648);let _=["All","High Priority","General","Unread"],F=()=>{let[e,t]=(0,o.useState)([]),[s,n]=(0,o.useState)(0),c=r.A.currentId(),i=(0,o.useCallback)(async()=>{try{let e="limit=10&category=text";1===s?e+="&priority=high":2===s?e+="&priority=general":3===s&&(e+="&seen=false");let{data:a,error:r}=await l.A.doGet({path:"orgs/".concat(c,"/data/threads?").concat(e)});if(r){console.error("Error fetching threads:",r);return}a&&a.threads&&t(a.threads)}catch(e){console.error("Error fetching threads:",e)}},[c,s]);return(0,o.useEffect)(()=>{i()},[c,s,i]),(0,a.jsxs)(N,{label:"Recent Messages",buttons:_,currentPriority:s,setCurrentPriority:n,page:"messages",children:[0===e.length&&(0,a.jsx)("span",{className:"text-center m-5 text-[#64748A]",children:"No recent data"}),e.map(e=>(0,a.jsx)(L,{data:JSON.parse(e.data),thread:e},e.id))]})},S={instagram:A.Rj,whatsapp:A.b_,fbpage:A.kp},L=e=>{var t,s,l,r,n;let{data:c,thread:i}=e,o=(0,E.useRouter)();return(0,a.jsxs)("div",{className:"w-full px-4 py-2 bg-[#F7F9FB] flex gap-4 cursor-pointer",onClick:()=>o.push({pathname:"/messages",query:{thread_id:i.id}}),children:[(0,a.jsx)("div",{className:"flex justify-start items-center",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"rounded-full w-12 h-12 flex items-center justify-center object-cover bg-gray-300",children:(0,a.jsx)(k(),{src:A.ff,alt:"",width:30,height:30,className:"rounded-full w-10 h-10 object-cover"})}),(0,a.jsx)("div",{className:"w-4 h-4 bg-white rounded-full absolute bottom-0 left-0",children:(0,a.jsx)(k(),{src:S[null==i?void 0:i.channel],alt:null==i?void 0:i.channel})})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsx)("span",{className:"text-sm font-normal text-black overflow-hidden text-ellipsis break-words line-clamp-1",children:c.sender_name}),(0,a.jsx)("span",{className:"text-xs font-normal text-[#737373] overflow-hidden text-ellipsis break-words line-clamp-2",children:(null===(t=i.last_message)||void 0===t?void 0:t.type)==="text"?(null===(l=JSON.parse((null===(r=i.last_message)||void 0===r?void 0:r.data)||"{}"))||void 0===l?void 0:null===(s=l.message)||void 0===s?void 0:s.content)||"":null===(n=i.last_message)||void 0===n?void 0:n.type})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-end justify-between",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(i.priority?"bg-[#2563EA]":"bg-[#F33F5E]")}),(0,a.jsx)("span",{className:"text-xs text-[#737373] font-normal text-nowrap",children:(0,C.g)(Number(i.last_active_at))})]})]})};var M=s(3176);let q=()=>{let e=(0,E.useRouter)();return(0,o.useEffect)(()=>{M.A.aeoOnly&&e.push("/aeo/overview")},[e]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(d,{})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,a.jsx)(f,{}),(0,a.jsx)(v,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,a.jsx)(F,{}),(0,a.jsx)(j,{})]})]})})}},59081:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var a=s(37876),l=s(43666),r=s(65259),n=s(82400),c=s(43598),i=s(54587),o=s.n(i),d=s(89099),x=s(14232);let m=[{name:"WhatsApp",icon:l.b_},{name:"Instagram",icon:l.Rj},{name:"Facebook",icon:l.ee},{name:"Exotel",icon:l.vN},{name:"Google Calendar",icon:l.cz},{name:"Custom Leads",icon:l.Ie},{name:"MCP",icon:l.hd}],h=e=>{let{setSettingTab:t,foryou:s}=e,[l,n]=(0,x.useState)([]),[i,o]=(0,x.useState)(!0),d=e=>{let t=m.find(t=>t.name.toLowerCase()===e.toLocaleLowerCase());return t?t.icon:e},h=e=>e.map(e=>{let{name:t}=e;return t.toLowerCase()}),f=(0,x.useCallback)(async()=>{let e=await r.A.doGet({path:"/orgs/".concat(c.A.currentId(),"/integrations")});e.error||(e.data.integrations.map(e=>("fbpage"===e.name&&(e.name="facebook"),"leads"===e.name&&(e.name="Custom Leads"),"google_calendar"===e.name&&(e.name="Google Calendar"),e)),n(e.data.integrations.filter(e=>{if("Custom Leads"===e.name){let{responses:t}=JSON.parse(e.data);if(0===t.length)return!1}return!0})),o(!1))},[]),g=m.filter(e=>{let{name:t}=e;return!h(l).includes(t.toLowerCase())});return((0,x.useEffect)(()=>{f()},[f]),i)?(0,a.jsx)("div",{children:"Loading..."}):s?0===g.length?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center gap-2.5 mt-4",children:(0,a.jsx)("span",{className:"text-sm text-black",children:"You have connected all channels"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2.5 mt-4 ",children:g.map(e=>{let{name:l,icon:r}=e;return(0,a.jsx)(u,{name:l,icon:r,setSettingTab:t,foryou:s},l)})}):(0,a.jsxs)(a.Fragment,{children:[g.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-black",children:"Add Integrations"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-4 ",children:g.map(e=>{let{name:s,icon:l}=e;return(0,a.jsx)(u,{name:s,icon:l,setSettingTab:t},s)})})]}),l.length>0&&(0,a.jsxs)("section",{className:"mt-8",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-black",children:"Current Integrations"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-4 ",children:l.map(e=>{let{name:s}=e;return(0,a.jsx)(u,{name:s,icon:d(s),setSettingTab:t},s)})})]})]})},u=e=>{let{name:t,icon:s,setSettingTab:l,foryou:r}=e,c=(0,d.useRouter)();return(0,a.jsxs)("div",{className:"bg-[#F7F9FB] border border-[#E1E7EF] rounded cursor-pointer flex flex-col items-center justify-center ".concat(r?"gap-2.5 py-6":"gap-2 h-36"," "),onClick:()=>{if(n.A.getOrgSetupRedirectPath()){c.replace({pathname:r?"/settings":"",query:{tab:"business-setting",from:"channels-management"}}),l&&l("business-setting");return}c.push("/integration/".concat(t.toLowerCase().split(" ").join("-")))},children:["string"==typeof s&&(0,a.jsx)("span",{children:s}),"object"==typeof s&&(0,a.jsx)(o(),{src:s,alt:t,width:50,height:50,className:"object-contain ".concat(r?"w-6 h-6":"")}),"string"!=typeof s&&(0,a.jsx)("span",{className:"text-sm text-black text-center",children:t})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,8511,636,6593,8792],()=>t(16760)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1365],{9526:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(95551).A)("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},11234:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(37876),s=a(97355);let l=e=>{let{children:t,className:a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("bg-white shadow-sm rounded-lg border-[0.4px] border-slate-200",a),children:t})}},15066:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(95551).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},18858:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(69241),s=a(29573);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},26314:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(37876),s=a(44491),l=a(38389),i=a(11234),n=a(65259),o=a(43598),d=a(95313),c=a(15066),u=a(9526),g=a(33015),h=a(95551);let m=(0,h.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),x=(0,h.A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),p=(0,h.A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var v=a(14232),y=a(7972),f=a(68869),j=a(49325),w=a(94499),b=a(65748),N=a(7623),k=a(19926),D=a(14631),A=a(92889);let _=()=>(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)(d.A,{className:"h-4 w-4 animate-spin"})}),T=e=>{let{message:t}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-center h-full gap-2",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:t})]})};function H(e){let{icon:t,title:a,title2:l,value:n,subtitle:o,loading:d}=e;return(0,r.jsx)(i.Z,{className:"bg-white border-0 shadow-md hover:shadow-lg",children:(0,r.jsx)(s.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-gray-100 flex items-center justify-center",children:t}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:a}),l&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:l}),d?(0,r.jsx)(_,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:n}),o&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:o})]})]})]})})})}function C(e){let{loading:t,error:a,data:l,platformColors:n}=e;return(0,r.jsxs)(i.Z,{className:"bg-white border-0 shadow-md hover:shadow-lg",children:[(0,r.jsxs)(s.aR,{children:[(0,r.jsxs)(s.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,r.jsx)(u.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Agent Activity Timeline by Platform"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"When each agent shows peak commercial interest in your site"})]}),(0,r.jsx)(s.Wu,{children:(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(f.u,{width:"100%",height:"100%",children:t?(0,r.jsx)(_,{}):a?(0,r.jsx)(T,{message:"Something went wrong"}):l.length>0?(0,r.jsxs)(j.b,{data:l,children:[(0,r.jsx)(w.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,r.jsx)(b.W,{dataKey:"date",stroke:"#6b7280",fontSize:12,interval:2}),(0,r.jsx)(N.h,{stroke:"#6b7280",fontSize:12}),(0,r.jsx)(k.m,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:e=>"Time: ".concat(e)}),(0,r.jsx)(D.s,{}),(0,r.jsx)(A.N,{type:"monotone",dataKey:"chatgpt",stroke:n.chatgpt,strokeWidth:2,name:"ChatGPT",dot:{fill:n.chatgpt,strokeWidth:2,r:3},activeDot:{r:5}}),(0,r.jsx)(A.N,{type:"monotone",dataKey:"perplexity",stroke:n.perplexity,strokeWidth:2,name:"Perplexity",dot:{fill:n.perplexity,strokeWidth:2,r:3},activeDot:{r:5}}),(0,r.jsx)(A.N,{type:"monotone",dataKey:"claude",stroke:n.claude,strokeWidth:2,name:"Claude",dot:{fill:n.claude,strokeWidth:2,r:3},activeDot:{r:5}}),(0,r.jsx)(A.N,{type:"monotone",dataKey:"gemini",stroke:n.gemini,strokeWidth:2,name:"Gemini",dot:{fill:n.gemini,strokeWidth:2,r:3},activeDot:{r:5}})]}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"No data available"})})})})]})}function P(){let[e,t]=(0,v.useState)({loading:!1,error:!1,graphData:[],currentHourHits:0,peakHourToday:{hour:"--:--",hits:0},mostActivePlatform:{platform:"",hits:0},pagesAccessed:0,grandTotal:0}),a=(0,v.useCallback)(async()=>{var e,t,a,r,s;let i=new Date,d=i.getHours(),c=new Date(i);c.setHours(d,59,59,999);let u=new Date(i);u.setDate(u.getDate()-1),u.setHours(d+1,0,0,0),23===d&&(u.setDate(u.getDate()+1),u.setHours(0,0,0,0));let g=u.getTime(),h=c.getTime(),m="hour",x=encodeURIComponent((0,l.UG)()),{data:p,error:v}=await n.A.doGet({path:"/orgs/".concat(o.A.current().id,"/trafficmon/dashboard?start_time=").concat(g,"&end_time=").concat(h,"&screen=overview&interval=").concat(m,"&timezone=").concat(x,"&fetch_grand_total=true")});if(v)return{error:!0};let y=p.graph_data.map(e=>({date:(0,l.yz)(e.interval,m),chatgpt:e.display.chatgpt,claude:e.display.claude,perplexity:e.display.perplexity,gemini:e.display.gemini})),f=y[y.length-1],j=(null==f?void 0:f.chatgpt)+(null==f?void 0:f.claude)+(null==f?void 0:f.gemini)+(null==f?void 0:f.perplexity),w=e=>(null==e?void 0:e.chatgpt)+(null==e?void 0:e.claude)+(null==e?void 0:e.gemini)+(null==e?void 0:e.perplexity),b={hour:null===(e=y[0])||void 0===e?void 0:e.date,total:w(y[0])};y.forEach(e=>{let t=w(e);t>b.total&&(b.hour=e.date,b.total=t)});let N={Chatgpt:Number((null==p?void 0:null===(t=p.cards)||void 0===t?void 0:t.chatgpt)||0),Claude:Number((null==p?void 0:null===(a=p.cards)||void 0===a?void 0:a.claude)||0),Google:Number((null==p?void 0:null===(r=p.cards)||void 0===r?void 0:r.gemini)||0),Perplexity:Number((null==p?void 0:null===(s=p.cards)||void 0===s?void 0:s.perplexity)||0)},k="",D=0;for(let[e,t]of Object.entries(N))t>D&&(k=e,D=t);return{graphData:y,currentHourHits:j,peakHourToday:{hour:(null==b?void 0:b.hour)||"--:--",hits:(null==b?void 0:b.total)||0},pagesAccessed:p.cards.ai_url_count||0,mostActivePlatform:{platform:k,hits:D},grandTotal:p.cards.grand_total_hits||0}},[]),s=(0,v.useMemo)(()=>({chatgpt:"#10B981",perplexity:"#3B82F6",claude:"#8B5CF6",gemini:"#F59E0B",others:"#6B7280"}),[]),i=(0,v.useCallback)(e=>e.toString().padStart(2,"0")+":00",[]),d=(0,v.useCallback)(async()=>{let e=await a();if(null==e?void 0:e.error){t(e=>({...e,loading:!1,error:!0}));return}t(t=>({...t,loading:!1,error:!1,graphData:(null==e?void 0:e.graphData)||[],currentHourHits:(null==e?void 0:e.currentHourHits)||0,peakHourToday:(null==e?void 0:e.peakHourToday)||{hour:"--:--",hits:0},mostActivePlatform:(null==e?void 0:e.mostActivePlatform)||{platform:"",hits:0},pagesAccessed:(null==e?void 0:e.pagesAccessed)||0,grandTotal:(null==e?void 0:e.grandTotal)||0}))},[a]);return(0,v.useEffect)(()=>{t(e=>({...e,loading:!0,error:!1})),d()},[d]),(0,r.jsxs)("div",{className:"space-y-6 p-4 bg-white min-h-[calc(100vh-5rem)]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Live Agent Activity Feed"}),(0,r.jsx)("button",{className:"px-2 py-1 rounded-md text-lg cursor-pointer transition-all duration-300",onClick:()=>{t(e=>({...e,loading:!0,error:!1})),d()},children:(0,r.jsx)(y.jTZ,{className:"h-6 w-6"})})]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Track how AI agents are evaluating and engaging with your brand right now"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Live â€¢ Updated ",i(Number(new Date().getHours()))]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsx)(H,{icon:(0,r.jsx)(g.A,{className:"h-4 w-4 text-blue-600"}),title:"Total Requests",title2:"AI + Human + Crawlers",value:e.grandTotal,loading:e.loading}),(0,r.jsx)(H,{icon:(0,r.jsx)(m,{className:"h-4 w-4 text-blue-600"}),title:"Agent Touchpoints",title2:"(Last one hour)",value:e.currentHourHits,loading:e.loading}),(0,r.jsx)(H,{icon:(0,r.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),title:"Most Engaged Agent",value:e.mostActivePlatform.platform,subtitle:"".concat(e.mostActivePlatform.hits," hits"),loading:e.loading}),(0,r.jsx)(H,{icon:(0,r.jsx)(x,{className:"h-4 w-4 text-purple-600"}),title:"Brand Pages Visited by Agents",value:e.pagesAccessed,loading:e.loading}),(0,r.jsx)(H,{icon:(0,r.jsx)(p,{className:"h-4 w-4 text-amber-600"}),title:"Highest Agent Activity Window",value:e.peakHourToday.hour,subtitle:"".concat(e.peakHourToday.hits," total hits"),loading:e.loading})]}),(0,r.jsx)(C,{loading:e.loading,error:e.error,data:e.graphData,platformColors:s})]})}},33015:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(95551).A)("chart-no-axes-combined",[["path",{d:"M12 16v5",key:"zza2cw"}],["path",{d:"M16 14v7",key:"1g90b9"}],["path",{d:"M20 10v11",key:"1iqoj0"}],["path",{d:"m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15",key:"1fw8x9"}],["path",{d:"M4 18v3",key:"1yp0dc"}],["path",{d:"M8 14v7",key:"n3cwzv"}]])},38389:(e,t,a)=>{"use strict";a.d(t,{O_:()=>s,UG:()=>l,iL:()=>r,yz:()=>i});let r=e=>{if("today"===e)return{start_time:new Date(new Date().setHours(0,0,0,0)).getTime(),end_time:Date.now()};if("7d"===e){let e=new Date;return e.setDate(e.getDate()-6),{start_time:new Date(e.setHours(0,0,0,0)).getTime(),end_time:new Date(new Date().setHours(23,59,59,999)).getTime()}}if("30d"===e){let e=new Date;return e.setDate(e.getDate()-29),{start_time:new Date(e.setHours(0,0,0,0)).getTime(),end_time:new Date(new Date().setHours(23,59,59,999)).getTime()}}if("90d"===e){let e=new Date;return e.setDate(e.getDate()-89),{start_time:new Date(e.setHours(0,0,0,0)).getTime(),end_time:new Date(new Date().setHours(23,59,59,999)).getTime()}}},s=e=>"today"===e?"hour":"7d"===e||"30d"===e?"day":"90d"===e?"month":"day";function l(){return Intl.DateTimeFormat().resolvedOptions().timeZone}let i=(e,t)=>{let a=new Date(e);return"hour"===t?a.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}):"day"===t?a.toLocaleDateString(navigator.language,{month:"short",day:"numeric"}):"month"===t?a.toLocaleDateString(navigator.language,{month:"short"}):a.toLocaleDateString(navigator.language,{month:"short",day:"numeric",year:"numeric"})}},44491:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>o,ZB:()=>n,Zp:()=>l,aR:()=>i});var r=a(37876);a(14232);var s=a(18858);function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border-[0.4px] border-slate-200",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function n(e){let{className:t,...a}=e;return(0,r.jsx)("h4",{"data-slot":"card-title",className:(0,s.cn)("leading-none",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6 [&:last-child]:pb-6",t),...a})}},67916:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/traffic/live-agent-feed",function(){return a(26314)}])},97355:(e,t,a)=>{"use strict";function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}a.d(t,{cn:()=>r})}},e=>{var t=t=>e(e.s=t);e.O(0,[7141,7092,1765,740,9325,636,6593,8792],()=>t(67916)),_N_E=e.O()}]);
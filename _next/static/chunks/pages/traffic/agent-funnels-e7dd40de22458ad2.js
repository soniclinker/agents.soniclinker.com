(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3981],{12012:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/traffic/agent-funnels",function(){return a(82131)}])},15066:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(95551).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},18858:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(69241),r=a(29573);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},38389:(e,t,a)=>{"use strict";a.d(t,{O_:()=>r,UG:()=>n,iL:()=>s,yz:()=>l});let s=e=>{if("today"===e)return{start_time:new Date(new Date().setHours(0,0,0,0)).getTime(),end_time:Date.now()};if("7d"===e){let e=new Date;return e.setDate(e.getDate()-6),{start_time:new Date(e.setHours(0,0,0,0)).getTime(),end_time:new Date(new Date().setHours(23,59,59,999)).getTime()}}if("30d"===e){let e=new Date;return e.setDate(e.getDate()-29),{start_time:new Date(e.setHours(0,0,0,0)).getTime(),end_time:new Date(new Date().setHours(23,59,59,999)).getTime()}}if("90d"===e){let e=new Date;return e.setDate(e.getDate()-89),{start_time:new Date(e.setHours(0,0,0,0)).getTime(),end_time:new Date(new Date().setHours(23,59,59,999)).getTime()}}},r=e=>"today"===e?"hour":"7d"===e||"30d"===e?"day":"90d"===e?"month":"day";function n(){return Intl.DateTimeFormat().resolvedOptions().timeZone}let l=(e,t)=>{let a=new Date(e);return"hour"===t?a.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}):"day"===t?a.toLocaleDateString(navigator.language,{month:"short",day:"numeric"}):"month"===t?a.toLocaleDateString(navigator.language,{month:"short"}):a.toLocaleDateString(navigator.language,{month:"short",day:"numeric",year:"numeric"})}},44491:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l});var s=a(37876);a(14232);var r=a(18858);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border-[0.4px] border-slate-200",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("h4",{"data-slot":"card-title",className:(0,r.cn)("leading-none",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6 [&:last-child]:pb-6",t),...a})}},48707:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(95551).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},48963:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(95551).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},64065:(e,t,a)=>{"use strict";a.d(t,{U:()=>i});var s=a(37876),r=a(14232),n=a(48707),l=a(48963);function i(e){var t;let{selectedRange:a,onRangeChange:i,value:c,onChange:d}=e,[o,u]=(0,r.useState)(!1),m=(0,r.useRef)(null),g=a||c||"today",h=i||d||(()=>{}),x=[{value:"today",label:"Today"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"}],f=(null===(t=x.find(e=>e.value===g))||void 0===t?void 0:t.label)||"Select range";(0,r.useEffect)(()=>{function e(e){m.current&&!m.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let y=e=>{h(e),u(!1)};return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsxs)("div",{className:"relative",ref:m,children:[(0,s.jsx)("button",{onClick:()=>u(!o),className:"w-40 px-3 py-2 text-left bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-900",children:f}),(0,s.jsx)(l.A,{className:"h-4 w-4 text-gray-400 transition-transform ".concat(o?"rotate-180":"")})]})}),o&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:(0,s.jsx)("div",{className:"py-1",children:x.map(e=>(0,s.jsx)("button",{onClick:()=>y(e.value),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition-colors ".concat(g===e.value?"bg-blue-50 text-blue-900 font-medium":"text-gray-900"),children:e.label},e.value))})})]})]})}},65488:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(95551).A)("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]])},69241:(e,t,a)=>{"use strict";function s(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=function e(t){var a,s,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(s=e(t[a]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s)}return r}(e))&&(s&&(s+=" "),s+=t);return s}a.d(t,{$:()=>s,A:()=>r});let r=s},82131:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(37876),r=a(64065),n=a(43666),l=a(65259),i=a(43598),c=a(95313),d=a(15066),o=a(83285),u=a(65488),m=a(54587),g=a.n(m),h=a(14232),x=a(44491),f=a(38389);let y=[{key:"ChatGPT",searchKey:"chatgpt",logo:n.UF,color:"#00C951",gradient:"from-green-500 to-emerald-600"},{key:"Claude",searchKey:"claude",logo:n.ne,color:"#AD46FF",gradient:"from-purple-500 to-violet-600"},{key:"Gemini",searchKey:"gemini",logo:n.Sv,color:"#FF6900",gradient:"from-orange-500 to-amber-600"},{key:"Perplexity",searchKey:"perplexity",logo:n.by,color:"#2B7FFF",gradient:"from-blue-500 to-cyan-600"}],p=()=>(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)(c.A,{className:"h-4 w-4 animate-spin"})}),b=e=>{let{message:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 h-full",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:t})]})};function v(e){let{data:t}=e,a=function(e){if(e.includes("green"))return{bg:"bg-green-500",lightBg:"bg-green-100",text:"text-green-700"};if(e.includes("blue")||e.includes("cyan"))return{bg:"bg-blue-500",lightBg:"bg-blue-100",text:"text-blue-700"};if(e.includes("purple")||e.includes("violet"))return{bg:"bg-purple-500",lightBg:"bg-purple-100",text:"text-purple-700"};if(e.includes("amber")||e.includes("orange"))return{bg:"bg-orange-500",lightBg:"bg-orange-100",text:"text-orange-700"};if(e.includes("indigo"))return{bg:"bg-indigo-500",lightBg:"bg-indigo-100",text:"text-indigo-700"};return{bg:"bg-gray-500",lightBg:"bg-gray-100",text:"text-gray-700"}}(t.gradient),r=t.clicks&&t.searches?t.clicks/t.searches*100>100?100:t.clicks/t.searches*100||0:0;return(0,s.jsxs)("div",{className:"space-y-4 p-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:(0,s.jsx)(g(),{src:t.logo,alt:t.platform,width:32,height:32,className:"h-8 w-8"})}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:t.platform})})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[t.clickThroughRate,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Conversion rate"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Recommendations Made"})]}),(0,s.jsx)("span",{className:"font-medium",children:t.searches})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"h-3 rounded-full ".concat(a.lightBg),children:(0,s.jsx)("div",{className:"h-3 rounded-full ".concat(a.bg),style:{width:"".concat(100,"%")}})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Engagements Initiated"})]}),(0,s.jsx)("span",{className:"font-medium ".concat(t.hasClicksData?"":"text-gray-400"),children:t.clicks?t.clicks:0})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"h-3 rounded-full bg-gray-100",children:r>0?(0,s.jsx)("div",{className:"h-3 rounded-full ".concat(a.bg),style:{width:"".concat(r,"%")}}):(0,s.jsx)("div",{className:"h-3 rounded-full bg-gray-300 opacity-50 relative",children:(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center"})})})})]})]})}let j=e=>{switch(e){case"today":return"today";case"7d":return"last 7 days";case"30d":return"last 30 days";case"90d":return"last 90 days";default:return"selected period"}};function N(e){let{selectedDateRange:t}=e,[a,r]=(0,h.useState)(!1),[n,c]=(0,h.useState)(!1),[d,o]=(0,h.useState)(null),u=(0,h.useCallback)(async e=>{r(!0),c(!1);let t=(0,f.iL)(e);if(!t){c(!0),r(!1);return}let{start_time:a,end_time:s}=t,{data:n,error:d}=await l.A.doGet({path:"/orgs/".concat(i.A.current().id,"/trafficmon/dashboard?start_time=").concat(a,"&end_time=").concat(s,"&screen=search_funnel")});if(d){c(!0),r(!1);return}o(n),r(!1)},[]);(0,h.useEffect)(()=>{u(t)},[u,t]);let m=(0,h.useMemo)(()=>d?y.map(e=>{let{key:t,searchKey:a,logo:s,color:r,gradient:n}=e,l=d[a].client_count||0,i=d[a].utm_count||0,c=Number(d[a].ctr);return{platform:t,logo:s,searches:l,clicks:i,clickThroughRate:c%1==0?c.toString():c.toFixed(2).toString(),color:r,gradient:n,hasClicksData:i>0}}):[],[d]);return(0,s.jsxs)(x.Zp,{className:"bg-white border-b-[0.4px] border-slate-200 shadow-md hover:shadow-lg",children:[(0,s.jsxs)(x.aR,{className:"pb-4",children:[(0,s.jsx)(x.ZB,{className:"text-lg",children:"Agent Decision Flow"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["See which agents advanced from recommendation to site access for"," ",j(t)]})]}),(0,s.jsx)(x.Wu,{className:"space-y-8",children:a?(0,s.jsx)(p,{}):n?(0,s.jsx)(b,{message:"Error loading data. Please try again later."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:m.map(e=>(0,s.jsx)(v,{data:e},e.platform))})})]})}let w=()=>{let[e,t]=(0,h.useState)("today");return(0,s.jsxs)("div",{className:"space-y-6 p-4 bg-white min-h-[calc(100vh-5rem)]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Agent Funnels"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Track click through rates from AI platform searches"})]}),(0,s.jsx)(r.U,{value:e,onChange:t})]}),(0,s.jsx)(N,{selectedDateRange:e})]})}},83285:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(95551).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[1765,636,6593,8792],()=>t(12012)),_N_E=e.O()}]);
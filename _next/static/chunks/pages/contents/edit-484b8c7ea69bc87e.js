(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4961],{18847:(e,t,r)=>{e.exports=r(78710)},32353:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/contents/edit",function(){return r(75981)}])},39249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return f}});let a=r(64252)._(r(14232)),l=r(46699),n=[],o=[],s=!1;function i(e){let t=e(),r={loading:!0,loaded:null,error:null};return r.promise=t.then(e=>(r.loading=!1,r.loaded=e,e)).catch(e=>{throw r.loading=!1,r.error=e,e}),r}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(e){return function(e,t){let r=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),n=null;function i(){if(!n){let t=new d(e,r);n={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return n.promise()}if(!s){let e=r.webpack?r.webpack():r.modules;e&&o.push(t=>{for(let r of e)if(t.includes(r))return i()})}function u(e,t){!function(){i();let e=a.default.useContext(l.LoadableContext);e&&Array.isArray(r.modules)&&r.modules.forEach(t=>{e(t)})}();let o=a.default.useSyncExternalStore(n.subscribe,n.getCurrentValue,n.getCurrentValue);return a.default.useImperativeHandle(t,()=>({retry:n.retry}),[]),a.default.useMemo(()=>{var t;return o.loading||o.error?a.default.createElement(r.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:n.retry}):o.loaded?a.default.createElement((t=o.loaded)&&t.default?t.default:t,e):null},[e,o])}return u.preload=()=>i(),u.displayName="LoadableComponent",a.default.forwardRef(u)}(i,e)}function c(e,t){let r=[];for(;e.length;){let a=e.pop();r.push(a(t))}return Promise.all(r).then(()=>{if(e.length)return c(e,t)})}u.preloadAll=()=>new Promise((e,t)=>{c(n).then(e,t)}),u.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let r=()=>(s=!0,t());c(o,e).then(r,r)})),window.__NEXT_PRELOADREADY=u.preloadReady;let f=u},46699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return a}});let a=r(64252)._(r(14232)).default.createContext(null)},75981:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(37876),l=r(65259),n=r(43598),o=r(18847),s=r.n(o),i=r(89099),d=r(14232),u=r(91589),c=r(75683);let f=s()(()=>Promise.all([r.e(6407),r.e(2930),r.e(136)]).then(r.bind(r,30136)),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),h=()=>{let[e,t]=(0,d.useState)(""),[r,o]=(0,d.useState)(""),[s,h]=(0,d.useState)(""),[m,b]=(0,d.useState)(null),[p,x]=(0,d.useState)({}),[_,g]=(0,d.useState)([]),[y,v]=(0,d.useState)({}),[j,w]=(0,d.useState)(!0),[C,k]=(0,d.useState)(""),[N,P]=(0,d.useState)("error"),[S,E]=(0,d.useState)(!1),O=(0,i.useRouter)(),{id:T}=O.query,A=()=>{L(p.data)&&x(e=>({...e,data:{draft_content:e.data.content||"",content:e.data.content||""}}))},D=(0,d.useCallback)(async()=>{var e;let t=await l.A.doGet({path:"/orgs/".concat(n.A.current().id,"/domains")});g(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.domains)},[]),R=async(t,r)=>{if(null===t)return;if(!p.id){E(!0),P("error"),k("Content not found");return}if(!e){E(!0),P("error"),k("Title is required");return}let a={id:p.id,title:e,slug:s,markdown:r,action:t?"publish":"draft"},o=await l.A.doPost({path:"/orgs/".concat(n.A.current().id,"/contents/").concat(p.id),data:a});if(o.error){E(!0),P("error"),k(o.error.message);return}O.back()},G=(0,d.useCallback)(async()=>{let e=await l.A.doGet({path:"/orgs/".concat(n.A.current().id,"/contents?id=").concat(T)});if(e.error){E(!0),P("error"),k(e.error.message);return}x(e.data.contents[0]),t(e.data.contents[0].title),o(e.data.contents[0].data.draft_content||""),h(e.data.contents[0].slug||""),w(!1)},[T]);(0,d.useEffect)(()=>{G(),D()},[G,D]);let L=e=>{var t,r;return((null==p?void 0:null===(t=p.data)||void 0===t?void 0:t.draft_content)||"")!==((null==p?void 0:null===(r=p.data)||void 0===r?void 0:r.content)||"")};return j?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"p-6 h-full flex flex-col justify-between",children:[S&&(0,a.jsx)(u.A,{type:N,message:C,onClose:()=>E(!1),autoCloseDelay:2e3}),(0,a.jsx)("div",{className:"w-min cursor-pointer text-4xl hover:text-gray-800 mb-4",onClick:()=>O.back(),children:(0,a.jsx)(c.eh5,{})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"justify-start text-black text-xl font-bold font-['Urbanist']",children:"Edit Contents"}),(0,a.jsxs)("div",{className:"flex justify-end items-center gap-4 text-blue-400",children:[(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>O.back(),children:"Cancel"}),(0,a.jsx)("div",{className:"".concat(L(p.data)?"cursor-pointer":"text-gray-300 cursor-not-allowed "),onClick:()=>A(),children:"Reset Content"}),(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>R(!1,p.data.draft_content),children:"Save Draft"}),(0,a.jsx)("div",{className:"".concat(L(p.data)?"cursor-pointer":"text-gray-300 cursor-not-allowed "),onClick:()=>R(!0,p.data.draft_content),children:"Publish"})]})]}),(0,a.jsxs)("div",{className:"w-full flex",children:[(0,a.jsxs)("div",{className:"w-1/2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,a.jsx)("input",{className:"h-[36px] border border-neutral-300 text-gray-600 font-medium bg-white max-w-3xl rounded-lg p-3 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",type:"text",placeholder:"Enter Title",value:e,onChange:e=>t(e.target.value)})]}),(0,a.jsx)("div",{className:"w-1/2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,a.jsx)("input",{className:"h-[36px] border border-neutral-300 text-gray-600 font-medium bg-white max-w-3xl rounded-lg p-3 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",type:"text",placeholder:"Enter Slug",value:s,onChange:e=>h(e.target.value)})]})})]}),(0,a.jsxs)("div",{className:"grow",children:[(0,a.jsx)("div",{className:"text-neutral-500 font-medium text-base mt-4",children:"Content"}),(0,a.jsx)("div",{className:"mt-1 h-10/12","data-color-mode":"light",children:(0,a.jsx)(f,{height:"100%",value:p.data.draft_content,onChange:e=>{x(t=>({...t,data:{draft_content:e||"",content:t.data.content||""}}))},textareaProps:{placeholder:"Write your content here..."}})})]})]})}},78710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return s},noSSR:function(){return o}});let a=r(64252);r(37876),r(14232);let l=a._(r(39249));function n(e){return{default:(null==e?void 0:e.default)||e}}function o(e,t){return delete t.webpack,delete t.modules,e(t)}function s(e,t){let r=l.default,a={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};e instanceof Promise?a.loader=()=>e:"function"==typeof e?a.loader=e:"object"==typeof e&&(a={...a,...e});let s=(a={...a,...t}).loader;return(a.loadableGenerated&&(a={...a,...a.loadableGenerated},delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?r({...a,loader:()=>null!=s?s().then(n):Promise.resolve(n(()=>null))}):(delete a.webpack,delete a.modules,o(r,a))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},91589:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(37876),l=r(14232),n=r(75683);let o={success:"bg-green-100 text-green-800 border-green-300",info:"bg-blue-100 text-blue-800 border-blue-300",error:"bg-red-100 text-red-800 border-red-300"},s=e=>{let{type:t,message:r,className:s="",onClose:i,autoCloseDelay:d=1e3}=e;return(0,l.useEffect)(()=>{if(i){let e=setTimeout(()=>{i()},d);return()=>clearTimeout(e)}},[i,d]),(0,a.jsx)("div",{className:"fixed top-4 left-0 right-0 flex justify-center z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"border rounded px-4 py-3 ".concat(o[t]," ").concat(s," \n                pointer-events-auto w-fit flex justify-between items-center \n                shadow-lg animate-slide-down"),role:"alert",children:[(0,a.jsx)("span",{children:r}),i&&(0,a.jsx)("button",{onClick:i,className:"ml-4 hover:opacity-70 transition-opacity","aria-label":"Close",children:(0,a.jsx)(n.WQq,{size:20})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,636,6593,8792],()=>t(32353)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4974],{6760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/history/questions",function(){return s(24159)}])},14084:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(37876),l=s(14232);let n=e=>{let{children:t,headers:s,data:n,isLoading:a,rowKey:i,renderCell:o,className:d}=e,[c,m]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{a&&setTimeout(()=>{m(!0)},1500)},[a]),(0,r.jsxs)("div",{className:"bg-white overflow-auto ".concat((null==d?void 0:d.table)||""," pt-0"),children:[(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:s.map(e=>(0,r.jsx)("th",{className:"p-2 md:p-3 lg:p-4 sticky top-0 bg-white z-10 text-start ".concat((null==d?void 0:d.header)||""),children:e.label},e.key))})}),a?(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:s.length,className:"text-center py-12 text-gray-400",children:c&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-b-white border-indigo-600"})})})})}):(0,r.jsx)("tbody",{children:0===n.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:s.length,className:"text-center py-12 text-gray-400",children:"No data found."})}):n.map((e,t)=>(0,r.jsx)("tr",{className:"text-start hover:bg-gray-200 ".concat(null==d?void 0:d.body),children:s.map((s,l)=>(0,r.jsx)("td",{className:"p-2 md:p-3 lg:p-4 ".concat(null==d?void 0:d.bodyData),children:o?o(e,s,l,t):e[s.key]},s.key))},i(e,t)))})]}),n.length>0&&!a&&t]})}},20477:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(37876),l=s(68951),n=s.n(l),a=s(46104);s(14232);let i=e=>{let{isOpen:t,onClose:s,title:l,children:i}=e;return t?(0,r.jsxs)("div",{className:"jsx-593ab1484ff139da fixed inset-0 z-50 flex",children:[(0,r.jsx)("div",{onClick:s,className:"jsx-593ab1484ff139da fixed inset-0 bg-black/20 transition-opacity"}),(0,r.jsxs)("div",{className:"jsx-593ab1484ff139da ml-auto w-full md:w-1/2 h-full bg-white shadow-xl p-6 relative animate-slide-in-right overflow-y-auto",children:[(0,r.jsx)("button",{onClick:s,"aria-label":"Close",className:"jsx-593ab1484ff139da absolute top-4 right-4 text-2xl text-gray-400 hover:text-gray-700",children:(0,r.jsx)(a.A,{className:"cursor-pointer",size:20})}),i]}),(0,r.jsx)(n(),{id:"593ab1484ff139da",children:"@-webkit-keyframes slide-in-right{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slide-in-right{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slide-in-right{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slide-in-right{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.animate-slide-in-right{-webkit-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-moz-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);-o-animation:slide-in-right.3s cubic-bezier(.4,0,.2,1);animation:slide-in-right.3s cubic-bezier(.4,0,.2,1)}"})]}):null}},24159:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(37876),l=s(14232),n=s(89099),a=s(20477),i=s(51421);let o=e=>{let{question:t,answer:s,runName:l="Run",runTime:n="",sovScore:a="--",citationsCount:o=0,sources:d=[],brands:c=[],citations:m=[]}=e;return(0,r.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,r.jsx)("div",{className:"text-black max-w-fit text-base font-bold mb-9 sticky top-0 z-10 pt-4 pb-4",children:"Reply Summary"}),(0,r.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap flex-col md:flex-row items-center gap-3 bg-violet-50/70 -mx-6 px-6 py-4 mb-6",children:[(0,r.jsxs)("span",{className:"flex items-center gap-2 text-slate-600 text-xs font-semibold",children:[(0,r.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-green-400 inline-block"}),"Completed Run"]}),(0,r.jsx)("span",{className:"text-slate-500 text-xs font-medium",children:l}),(0,r.jsx)("span",{className:"text-slate-500 text-xs font-semibold",children:n}),(0,r.jsxs)("span",{className:"text-slate-500 text-xs font-semibold md:ml-auto",children:["SOV Score: ",a]}),(0,r.jsxs)("span",{className:"text-slate-500 text-xs font-semibold",children:["Citations: ",o]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,r.jsx)("div",{className:"flex justify-end md:justify-end",children:(0,r.jsx)("span",{className:"bg-indigo-100 px-4 py-2 rounded-lg text-indigo-500 text-xs font-medium",children:t})}),(0,r.jsx)("div",{className:"rounded-lg max-w-xl px-3 py-2 bg-zinc-100/75 text-neutral-950 text-xs font-normal leading-relaxed mb-8 bg-red-00",children:(0,r.jsx)(i.A,{content:s})}),c.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-black text-base font-bold mb-2",children:"Brands"}),(0,r.jsx)("ul",{className:"list-disc ml-6 text-indigo-600 text-xs font-light",children:c.map((e,t)=>(0,r.jsx)("li",{className:"text-sm text-indigo-500 font-normal my-2",children:e},t))})]}),m.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-black text-base font-bold mb-2",children:"Citations"}),(0,r.jsx)("ul",{className:"list-disc ml-6 text-indigo-600 text-xs font-light",children:m.map((e,t)=>(0,r.jsx)("li",{className:"text-sm text-indigo-500 font-normal break-all my-2 hover:underline",children:(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t))})]})]})})]})};var d=s(65259),c=s(43598),m=s(42059),u=s(98188),x=s(14084);let h=()=>{let e=(0,n.useRouter)().query.runId,[t,s]=(0,l.useState)([]),[i,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(null),[g,b]=(0,l.useState)(!1),[v,y]=(0,l.useState)(null),[j,w]=(0,l.useState)(""),[N,k]=(0,l.useState)(""),[S,A]=(0,l.useState)("--"),[C,z]=(0,l.useState)("--"),[P,_]=(0,l.useState)(1),[E,O]=(0,l.useState)(10),q=t.slice((P-1)*E,P*E);return(0,l.useEffect)(()=>{e&&(async()=>{var t,r,l,n,a,i,o,m,u,x,h,f,p,g,v,j,N,S;b(!0),y(null);let{data:C,error:P}=await d.A.doGet({path:"/orgs/".concat(null===(t=c.A.current())||void 0===t?void 0:t.id,"/aeoanalysis/tasks/").concat(e,"?fetch_result=true")});if(P){y("Failed to fetch questions"),b(!1);return}let _=(null==C?void 0:null===(n=C.task)||void 0===n?void 0:null===(l=n.result)||void 0===l?void 0:null===(r=l.all)||void 0===r?void 0:r.queries)||[],E=(null==C?void 0:null===(o=C.task)||void 0===o?void 0:null===(i=o.result)||void 0===i?void 0:null===(a=i.own)||void 0===a?void 0:a.queries)||[];s(_.map((e,t)=>({...e,mention:E.includes(t)}))),w((null==C?void 0:null===(u=C.task)||void 0===u?void 0:null===(m=u.data)||void 0===m?void 0:m.queryset_name)||(null==C?void 0:null===(h=C.task)||void 0===h?void 0:null===(x=h.data)||void 0===x?void 0:x.queryset_id)||"Run"),k((null==C?void 0:null===(f=C.task)||void 0===f?void 0:f.created_at)?new Date(Number(C.task.created_at)).toLocaleString():""),A("number"==typeof(null==C?void 0:null===(v=C.task)||void 0===v?void 0:null===(g=v.result)||void 0===g?void 0:null===(p=g.own)||void 0===p?void 0:p.sov)?"".concat(C.task.result.own.sov.toFixed(2),"%"):"--"),z((null==C?void 0:null===(S=C.task)||void 0===S?void 0:null===(N=S.data)||void 0===N?void 0:null===(j=N.input)||void 0===j?void 0:j.location)||"--"),b(!1)})()},[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.A,{}),v&&(0,r.jsx)("div",{className:"text-red-500 text-sm font-normal",children:v}),(0,r.jsx)(x.A,{headers:[{key:"question",label:"Question"},{key:"location",label:"Location"},{key:"mention",label:"Mention"},{key:"actions",label:"Actions"}],data:q,isLoading:g,rowKey:e=>e.query.toString(),className:{table:"h-[calc(100vh-9.1875rem)]",header:"border-b border-neutral-200 text-neutral-500 text-xs font-medium bg-neutral-100!",body:"border-b border-neutral-200",bodyData:"text-sm"},renderCell:(e,t,s,l)=>"question"===t.key?(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)("span",{className:"text-indigo-600 text-xs font-normal",children:e.query})}):"location"===t.key?(0,r.jsx)("div",{className:"text-neutral-950 text-xs font-normal",children:C}):"mention"===t.key?(0,r.jsx)("div",{className:"text-neutral-950 text-xs font-normal",children:e.mention?(0,r.jsx)("span",{className:"text-green-500",children:"Yes"}):(0,r.jsx)("span",{className:"text-red-500",children:"No"})}):"actions"===t.key?(0,r.jsx)("div",{className:"text-indigo-500 text-xs font-normal hover:underline cursor-pointer",onClick:()=>{p(l),h(!0)},children:"View Answer"}):void 0,children:(0,r.jsx)(u.A,{currentPage:P,setCurrentPage:_,totalItems:t.length,itemsPerPage:E,setItemsPerPage:O})}),(0,r.jsx)(a.A,{isOpen:i,onClose:()=>h(!1),children:null!==f&&t[f]&&(0,r.jsx)(o,{question:t[f].query,answer:t[f].answer||"",runName:j,runTime:N,sovScore:S,citationsCount:Array.isArray(t[f].annotations)?t[f].annotations.length:0,brands:t[f].brands||[],citations:t[f].urls||[],sources:t[f].sources||t[f].urls||[]})})]})}},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),n=s(89099),a=s(43598);let i=()=>{let e=(0,n.useRouter)(),t=e.asPath,[s,i]=(0,l.useState)("aeo"),o=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))).map(e=>"aeo"===e?s:e),d=o.map((l,n)=>{let a=n===o.length-1;return(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(a)return;let r=o.slice(0,n+1),l="/".concat(r.map(e=>e===s?1===r.length?"/aeo/overview":"aeo":e).join("/"));l!==t&&l!=="/".concat(o[0])&&e.push(l)},children:l.replace(/-/g," ")}),!a&&(0,r.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},n)});return(0,l.useEffect)(()=>{(async()=>{let e=await a.A.currentAeoProject();e&&i(e.name)})()},[]),(0,r.jsx)("div",{children:d})},o=e=>{let{children:t,title:s}=e;return(0,r.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[s||(0,r.jsx)(i,{}),t&&(0,r.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},51421:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var r=s(37876);s(14232);var l=s(3610),n=s(45539),a=s(9828),i=s(14883),o=s(86278),d=s(13332),c=s(73435),m=s(65721);let u=[],x={allowDangerousHtml:!0},h=/^(https?|ircs?|mailto|xmpp)$/i,f=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function p(e){let t=function(e){let t=e.rehypePlugins||u,s=e.remarkPlugins||u,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...x}:x;return(0,d.l)().use(i.A).use(s).use(o.A,r).use(t)}(e),s=function(e){let t=e.children||"",s=new m.T;return"string"==typeof t?s.value=t:(0,l.HB)("Unexpected value `"+t+"` for `children` prop, expected `string`"),s}(e);return function(e,t){let s=t.allowedElements,i=t.allowElement,o=t.components,d=t.disallowedElements,m=t.skipHtml,u=t.unwrapDisallowed,x=t.urlTransform||g;for(let e of f)Object.hasOwn(t,e.from)&&(0,l.HB)("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":"remove it")+" (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#"+e.id+"> for more info)");return s&&d&&(0,l.HB)("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),(0,c.YR)(e,function(e,t,r){if("raw"===e.type&&r&&"number"==typeof t)return m?r.children.splice(t,1):r.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in a.$)if(Object.hasOwn(a.$,t)&&Object.hasOwn(e.properties,t)){let s=e.properties[t],r=a.$[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=x(String(s||""),t,e))}}if("element"===e.type){let l=s?!s.includes(e.tagName):!!d&&d.includes(e.tagName);if(!l&&i&&"number"==typeof t&&(l=!i(e,t,r)),l&&r&&"number"==typeof t)return u&&e.children?r.children.splice(t,1,...e.children):r.children.splice(t,1),t}}),(0,n.H)(e,{Fragment:r.Fragment,components:o,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0})}(t.runSync(t.parse(s),s),e)}function g(e){let t=e.indexOf(":"),s=e.indexOf("?"),r=e.indexOf("#"),l=e.indexOf("/");return -1===t||-1!==l&&t>l||-1!==s&&t>s||-1!==r&&t>r||h.test(e.slice(0,t))?e:""}var b=s(96577);let v=e=>{let{content:t}=e;return(0,r.jsx)("div",{className:"prose max-w-none",children:(0,r.jsx)(p,{remarkPlugins:[b.A],components:{table:e=>{let{node:t,...s}=e;return(0,r.jsx)("table",{className:"w-full border-collapse mt-4 mb-4 text-sm leading-6 text-[#1e2035]",...s})},thead:e=>{let{node:t,...s}=e;return(0,r.jsx)("thead",{className:"bg-slate-300",...s})},th:e=>{let{node:t,...s}=e;return(0,r.jsx)("th",{className:"border border-slate-200 px-2 py-2 text-left font-bold",...s})},td:e=>{let{node:t,...s}=e;return(0,r.jsx)("td",{className:"border border-slate-200 px-2 py-2 text-left",...s})},tr:e=>{let{node:t,...s}=e;return(0,r.jsx)("tr",{className:"even:bg-primary",...s})},a:e=>{let{node:t,...s}=e;return(0,r.jsx)("a",{className:"textPrimary underline hover:text-blue-800",target:"_blank",rel:"noopener noreferrer",...s})}},children:t})})}},98188:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),n=s(6246),a=s(28067),i=s(48963);let o=e=>{let{currentPage:t,setCurrentPage:s,totalItems:o,itemsPerPage:d,setItemsPerPage:c,hidePageNumbers:m=!1}=e,[u,x]=(0,l.useState)(!1),h=Math.ceil(o/d);if(o<=1)return null;let f=e=>{e>=1&&e<=h&&s(e)},p=e=>{c(e),s(1),x(!1)};return(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 px-6 bg-white border-t border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-600",children:(0,r.jsxs)("span",{children:["Page ",t," of ",h]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>f(t-1),disabled:1===t,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(1===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(n.A,{size:16})}),!m&&(0,r.jsx)("div",{className:"flex items-center gap-1 mx-2",children:(()=>{let e=[];if(h<=5)for(let s=1;s<=h;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm font-medium transition-colors cursor-pointer ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));else{if(e.push((0,r.jsx)("button",{onClick:()=>f(1),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(1===t?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1"},1)),t<=3){for(let s=2;s<=Math.min(4,h-1);s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));h>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis"))}else if(t>=h-2){h>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex  items-center justify-center text-gray-400",children:"..."},"ellipsis"));for(let s=Math.max(h-3,2);s<=h-1;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s))}else{e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis1"));for(let s=t-1;s<=t+1;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis2"))}h>1&&e.push((0,r.jsx)("button",{onClick:()=>f(h),className:"w-8 h-8 rounded text-sm font-medium transition-colors ".concat(t===h?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:h},h))}return e})()}),(0,r.jsx)("button",{onClick:()=>f(t+1),disabled:t===h,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(t===h?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(a.A,{size:16})})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 relative",children:[(0,r.jsxs)("span",{className:"mr-2",children:[d," per page"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>x(!u),className:"flex items-center cursor-pointer justify-center w-6 h-6 rounded hover:bg-gray-100 transition-colors",children:(0,r.jsx)(i.A,{size:16})}),u&&(0,r.jsx)("div",{className:"absolute right-0 bottom-[35px] mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 min-w-[120px]",children:[5,10,20,50].map(e=>(0,r.jsxs)("button",{onClick:()=>p(e),className:"w-full cursor-pointer px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors ".concat(d===e?"bg-blue-50 text-blue-600":"text-gray-700"),children:[e," per page"]},e))})]})]}),u&&(0,r.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>x(!1)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2930,9526,636,6593,8792],()=>t(6760)),_N_E=e.O()}]);
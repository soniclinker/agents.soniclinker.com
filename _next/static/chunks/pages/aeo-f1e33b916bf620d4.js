(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7829],{12476:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(37876);r(14232);let a=e=>{let{fields:t,renderRow:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"grid grid-cols-".concat(t.length," place-items-center gap-1 sm:gap-2 md:gap-3 lg:gap-4 bg-gray-100 text-gray-700 font-medium py-3 px-10 sticky top-0 z-20\n          bg-primary/50 rounded-tl rounded-tr border-l border-r border-b border-slate-200 border-t"),children:t.map((e,t)=>(0,s.jsx)("div",{className:"text-sm lg:text-base w-full h-full text-start",children:e},t))}),(0,s.jsx)("div",{children:r()})]})}},16821:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(42874),a=r(80498),n=r(3176),i=r(65259),l=r(20318);let o=()=>n.A.apiUrl+"/connect/update";class d{static getInstance(e){return(0,s._)(d,d,u)||(0,a._)(d,d,u,new d(e)),(0,s._)(d,d,u)}setOrgId(e){this.orgId=e}on(e,t){this.listener.add(t),"not_connected"===this.status&&this.connect()}off(e){this.listener.remove(e)}setupPing(){setTimeout(()=>{this.socket&&this.socket.readyState===WebSocket.OPEN&&(this.socket.send("{}"),this.setupPing())},3e4)}connect(){if("not_connected"!==this.status)return;this.changeStatus("connecting");let e=[],t=i.A.token();t&&e.push("access_token="+t),this.orgId&&e.push("org_id="+this.orgId);let r=e.length?"?"+e.join("&"):"";this.socket=new WebSocket(o()+r),this.socket.addEventListener("open",()=>{this.changeStatus("connected"),this.setupPing()}),this.socket.addEventListener("close",()=>{this.changeStatus("not_connected"),console.log("WebSocket closed")}),this.socket.addEventListener("message",e=>{try{let t=JSON.parse(e.data);this.listener.trigger(t)}catch(t){console.error("Invalid WebSocket message:",e.data)}})}send(e){this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify(e))}disconnect(){if(this.socket)try{this.socket.close()}catch(e){console.error("Error closing WebSocket:",e)}}changeStatus(e){this.status!==e&&(this.status=e)}constructor(e){this.status="not_connected",this.socket=null,this.orgId=e,this.listener=new l.A}}var u={writable:!0,value:null};let c=d},24480:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(37876);let a=e=>{let{children:t,columns:r,...a}=e;return(0,s.jsx)("div",{className:"grid grid-cols-".concat(r," gap-2 sm:gap-3 md:gap-3 lg-gap-5 place-items-start py-4 px-5 border-b border-l border-r border-gray-100 hover:bg-gray-50"),...a,children:t})}},32675:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(37876);r(14232);let a=e=>{let{label:t,action:r}=e;return(0,s.jsx)("button",{className:"py-1 px-2 hover:bg-gray-100 rounded cursor-pointer block w-full text-left",onClick:r,children:t})}},32722:(e,t,r)=>{"use strict";function s(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}r.d(t,{_:()=>s})},35712:(e,t,r)=>{"use strict";function s(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}r.d(t,{_:()=>s})},42874:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var s=r(32722),a=r(35712);function n(e,t,r){return(0,s._)(e,t),(0,a._)(r,"get"),r.get?r.get.call(e):r.value}},49459:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(37876),a=r(14232),n=r(26478);let i=e=>{let{children:t}=e,[r,i]=(0,a.useState)(!1),l=(0,a.useRef)(null),o=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!r)return;let e=l.current,t=o.current;e&&t&&requestAnimationFrame(()=>{let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a={top:r.top,bottom:window.innerHeight-r.bottom,left:r.left,right:window.innerWidth-r.right};Object.assign(t.style,{top:"",bottom:"",left:"",right:""}),a.right>=s.width?(t.style.left="120%",t.style.top="0"):a.left>=s.width&&(t.style.right="120%",t.style.top="0"),a.bottom<=s.height&&(t.style.top="-".concat(s.height-r.height,"px"))})},[r]);let d=a.Children.map(t,e=>a.isValidElement(e)?a.cloneElement(e,{onClick:t=>{"onClick"in e.props&&"function"==typeof e.props.onClick&&e.props.onClick(t),i(!1)}}):e);return(0,a.useEffect)(()=>{let e=e=>{var t,r;(null===(t=l.current)||void 0===t?void 0:t.contains(e.target))||(null===(r=o.current)||void 0===r?void 0:r.contains(e.target))||i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"inline-block z-10",children:[(0,s.jsx)("button",{ref:l,onClick:e=>{e.stopPropagation(),i(e=>!e)},className:"p-2 rounded bg-gray-100 cursor-pointer",children:(0,s.jsx)(n.Ym0,{})}),r&&(0,s.jsx)("div",{ref:o,className:"absolute min-w-[150px] p-1 bg-white shadow-[0_0_5px_rgba(0,0,0,0.2)] rounded-lg z-50 transition-all",children:d})]})})}},53949:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo",function(){return r(83131)}])},70430:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(37876),a=r(14232),n=r(74562),i=r(65259),l=r(43598),o=r(49034);let d=e=>{let{id:t,args:r,setRefetchQuery:o}=e,[d,x]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null),[p,f]=(0,a.useState)([]),b=e=>{let t=p.find(t=>t.id===e.target.id);t&&(t.value=e.target.value),f(p.map(r=>r.id===e.target.id&&null!=t?t:r))},v=async e=>{e.preventDefault();let r=Object.fromEntries(new FormData(e.target));for(let e in r){let t=r[e].toString().trim();if(!t)return;r[e]=t}x(!0);let s=await i.A.doPost({path:"/orgs/".concat(l.A.current().id,"/querysets/").concat(t),data:{data:{args:r}}});if(s.error){h(s.error.message);return}s.data&&(n.A.hide(),o(e=>!e)),x(!1)},y=(0,a.useCallback)(async()=>{let{data:e,error:t}=await i.A.doGet({path:"/orgs/".concat(l.A.current().id,"/aeo/workflows")});if(t){h("Error fetching workflows"),console.log(t.message);return}e&&f(e.workflows.filter(e=>"qgen"===e.type)[0].args.filter(e=>e.used_for.includes("analysis")).map(e=>({...e,value:r[e.id]})))},[r]);return(0,a.useEffect)(()=>{y()},[y]),(0,s.jsxs)("form",{className:"max-h-[60vh] overflow-auto flex flex-col",onSubmit:v,children:[(0,s.jsx)("div",{children:p.length>0&&p.map(e=>"textarea"===e.editor?(0,s.jsx)(c,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):"country_dropdown"===e.editor?(0,s.jsx)(m,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):(0,s.jsx)(u,{id:e.id,name:e.name,value:e.value,changeHandler:b,description:e.description,required:e.required},e.id))}),g&&(0,s.jsx)("div",{className:"text-red-500 font-medium text-base mt-4 mx-1",children:g}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"bgLightBlue text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bgMediumBlue transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Update"})]})},u=e=>{let{id:t,name:r,description:n,required:i,value:l}=e,[o,d]=(0,a.useState)(l);return(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:n}),(0,s.jsx)("input",{type:"text",id:t,name:t,value:o,onChange:e=>d(e.target.value),required:i,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},c=e=>{let{id:t,name:r,description:n,required:i,value:l}=e,[o,d]=(0,a.useState)(l);return(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:n}),(0,s.jsx)("textarea",{id:t,name:t,required:i,value:o,onChange:e=>d(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},m=e=>{let{id:t,name:r,description:n,required:i,value:l}=e,d=(0,o.oj)(),[u,c]=(0,a.useState)(l);return(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:n}),(0,s.jsx)("select",{id:t,name:t,required:i,value:u,onChange:e=>c(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",children:Object.values(d).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]})}},80498:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var s=r(32722),a=r(35712);function n(e,t,r,n){return(0,s._)(e,t),(0,a._)(r,"set"),!function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}(e,r,n),n}},83131:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(37876),a=r(65259),n=r(82400),i=r(43598),l=r(89099),o=r(14232),d=r(49459),u=r(12476),c=r(24480),m=r(74562),x=r(49034),g=r(16821);let h=e=>{var t;let{setRefetchTask:r}=e,[n,d]=(0,o.useState)(!1),[u,c]=(0,o.useState)(null),[x,h]=(0,o.useState)([]),[v,y]=(0,o.useState)(""),[j,w]=(0,o.useState)(null),[N,A]=(0,o.useState)(""),[k,S]=(0,o.useState)(""),_=(0,l.useRouter)(),q=i.A.current().id,E=e=>{switch(e){case"website":return v;case"keywords":return(null==j?void 0:j.search_queries.join("\n"))||"";case"user_persona":return(null==j?void 0:j.user_personas.join("\n"))||"";case"brand":return(null==j?void 0:j.brand_names.join(", "))||"";case"location":return(null==j?void 0:j.country_code)||"";case"domains":return(null==j?void 0:j.domains.join(", "))||"";case"num_queries":return(null==j?void 0:j.num_queries.toString())||"";default:return""}},C=async()=>{if(!v){c("Please enter a website");return}c(null),d(!0);let{data:e,error:t}=await a.A.doGet({path:"/orgs/".concat(i.A.current().id,"/aeo/querygen-suggestions?website=").concat(v)});if(t){c("Something went wrong. Please try again."),d(!1);return}e&&S(e.task_id)},P=(0,o.useCallback)(async e=>{let{data:t,error:r}=await a.A.doGet({path:"/orgs/".concat(i.A.current().id,"/aeo/tasks/").concat(e)});if(r){c("Something went wrong"),d(!1);return}if(t){let e=t.task.data.suggestions;A(e.name),w(e),d(!1)}},[]),R=async()=>{let{data:e,error:t}=await a.A.doGet({path:"/orgs/".concat(i.A.current().id,"/aeo/workflows")});if(t){c("Error fetching workflows"),console.log(t.message);return}e&&h(e.workflows.filter(e=>"qgen"===e.type))},B=async e=>{var t;e.preventDefault(),c(null);let r=Object.fromEntries(new FormData(e.target));for(let e in r){let t=r[e].toString().trim();r[e]=t}let s=r.name;if(delete r.name,5>Number(r.num_queries)){c("Number of queries cannot be less than 5");return}if(Number(r.num_queries)>10){c("Number of queries cannot be more than 10 in free tier");return}let n={name:s,data:{workflow:null===(t=x[0])||void 0===t?void 0:t.id,args:r}};d(!0);let l=await a.A.doPost({path:"/orgs/".concat(i.A.current().id,"/querysets"),data:n});if(l.error){c(l.error.message);return}if(l.data){let{id:e}=l.data;if(e){let{data:t,error:r}=await a.A.doPost({path:"/orgs/".concat(i.A.current().id,"/querysets/").concat(e),data:{action:"start_task"}});r&&c(r.message),t&&_.push("/aeo/manage?id=".concat(e))}m.A.hide()}d(!1)};return(0,o.useEffect)(()=>{R()},[]),(0,o.useEffect)(()=>{let e=g.A.getInstance(q),t=e=>{"querygen_helper_task_status"===e.type&&e.data.task_id===k&&("completed"===e.data.status?P(k):"failed"===e.data.status&&c("Task failed"))};return e.on("message",t),()=>{e.off("message",t)}},[q,P,k]),(0,s.jsxs)("form",{className:"max-h-[60vh] overflow-auto flex flex-col",onSubmit:B,children:[(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1 ".concat(j?"hidden":""),children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:"name",children:"Enter your business website"}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:"Enter the URL of your website"}),(0,s.jsx)("input",{type:"text",id:"website",value:v,onChange:e=>y(e.target.value),required:!0,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1 ".concat(j?"":"hidden"),children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:"name",children:"Question set name"}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:"create any name to identify questions set"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:N,onChange:e=>A(e.target.value),required:!0,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]}),(0,s.jsx)("div",{className:"".concat(j?"":"hidden"),children:j&&x.length>0&&(null===(t=x[0])||void 0===t?void 0:t.args.map(e=>"textarea"===e.editor?(0,s.jsx)(f,{id:e.id,name:e.name,description:e.description,required:e.required,initialValue:E(e.id)},e.id):"country_dropdown"===e.editor?(0,s.jsx)(b,{id:e.id,name:e.name,description:e.description,required:e.required,initialValue:E(e.id)},e.id):(0,s.jsx)(p,{id:e.id,name:e.name,description:e.description,required:e.required,initialValue:E(e.id)},e.id)))}),u&&(0,s.jsx)("div",{className:"text-red-500 font-medium text-base mt-4 mx-1",children:u}),j&&(0,s.jsx)("button",{type:"submit",disabled:n,className:"bgLightBlue text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bgMediumBlue transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Generate Questions"}),!j&&(0,s.jsx)("button",{type:"button",disabled:n,onClick:()=>C(),className:"bgLightBlue text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bgMediumBlue transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Please wait while we are fetching details..":"Next"})]})},p=e=>{let{id:t,name:r,description:a,required:n,initialValue:i}=e,[l,d]=(0,o.useState)(i);return(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:a}),(0,s.jsx)("input",{type:"text",id:t,name:t,value:l,onChange:e=>d(e.target.value),required:n,readOnly:"website"===t,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},f=e=>{let{id:t,name:r,description:a,required:n,initialValue:i}=e,[l,d]=(0,o.useState)(i);return(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:a}),(0,s.jsx)("textarea",{id:t,name:t,value:l,rows:l.split("\n").length,onChange:e=>d(e.target.value),required:n,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},b=e=>{let{id:t,name:r,description:a,required:n,initialValue:i}=e,l=(0,x.oj)(),[d,u]=(0,o.useState)(i);return(0,s.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,s.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:a}),(0,s.jsx)("select",{id:t,name:t,required:n,value:d,onChange:e=>u(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",children:Object.values(l).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]})};var v=r(32675),y=r(70430);let j=()=>{let[e,t]=(0,o.useState)([]),[r,x]=(0,o.useState)(!1),[g,p]=(0,o.useState)(null),[f,b]=(0,o.useState)(!1),j=(0,l.useRouter)(),k=(0,o.useCallback)(async r=>{var s;let{loader:n}=r;0===e.length&&n&&x(!0);let{data:l,error:o}=await a.A.doGet({path:"/orgs/".concat(null===(s=i.A.current())||void 0===s?void 0:s.id,"/querysets")});if(o){p("Something went wrong"),x(!1);return}if(l){if(0===l.querysets.length){p("No question lists found"),x(!1),t([]);return}p(null),t(l.querysets),x(!1)}},[e.length]);return(0,o.useEffect)(()=>{n.A.getOrgSetupRedirectPath()&&setTimeout(()=>{m.A.show("Setup Business Profile",(0,s.jsx)(A,{}),!0)},0)},[j]),(0,o.useEffect)(()=>{k({loader:!0})},[k,f]),(0,s.jsxs)("div",{className:"bg-white p-2 lg:p-6 min-h-[calc(100vh-80px)]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-5 sticky top-0",children:[(0,s.jsx)("h2",{className:"text-lg lg:text-sm justify-start textSecondary700 font-extrabold",children:"ChatGPT Visibility Analysis"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 bgMediumBlue text-white rounded cursor-pointer text-sm",onClick:()=>{m.A.show("Start Analysis",(0,s.jsx)(h,{setRefetchTask:b}))},children:"Analyse my brand"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-white textPrimary border border-indigo-600 rounded cursor-pointer text-sm",onClick:()=>j.push("/aeo/analysis"),children:"View Reports"})]})]}),r&&(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-gray-900"})}),!r&&g&&(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-red-500",children:g})}),!r&&e.length>0&&(0,s.jsx)("div",{className:"flex items-center justify-start mb-4",children:(0,s.jsx)("span",{className:"text-gray-700",children:"Question Sets"})}),!r&&e.length>0&&(0,s.jsx)(u.A,{fields:["Name","Updated At","Actions"],renderRow:()=>e.map(e=>(0,s.jsxs)(c.A,{columns:3,onClick:()=>{j.push("/aeo/manage/?id=".concat(e.id))},children:[(0,s.jsx)("div",{className:"capitalize text-sm lg:text-base w-full h-full text-start pl-4",children:e.name}),(0,s.jsx)("div",{className:"text-red-600 w-full h-full text-start pl-4",title:e.created_at.toString(),children:(0,s.jsx)("span",{className:"inline-block text-blue-500",children:new Date(Number(e.updated_at)).toLocaleString()})}),(0,s.jsx)("div",{className:"pl-4",children:(0,s.jsxs)(d.A,{children:[(0,s.jsx)(v.A,{label:"Questions",action:t=>{t.stopPropagation(),j.push("/aeo/manage/?id=".concat(e.id))}}),(0,s.jsx)(v.A,{label:"Reports",action:t=>{t.stopPropagation(),j.push("/aeo/analysis/?id=".concat(e.id))}}),(0,s.jsx)(v.A,{label:"Rename",action:t=>{t.stopPropagation(),m.A.show("Rename Query Set",(0,s.jsx)(N,{id:e.id,name:e.name,setRefetchTask:b}))}}),(0,s.jsx)(v.A,{label:"Delete",action:t=>{t.stopPropagation(),m.A.show("Delete Query Set",(0,s.jsx)(w,{id:e.id,setRefetchTask:b}))}}),(0,s.jsx)(v.A,{label:"Edit Business Profile",action:t=>{t.stopPropagation(),m.A.show("Edit Business Profile",(0,s.jsx)(y.A,{id:e.id,args:e.data.args,setRefetchQuery:b}))}})]})})]},e.id))})]})},w=e=>{let{id:t,setRefetchTask:r}=e,[n,l]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),c=async()=>{u(null),l(!0);let e=await a.A.doDelete({path:"/orgs/".concat(i.A.current().id,"/querysets/").concat(t)});if(e.error){u(e.error.message),l(!1);return}l(!1),m.A.hide(),r(e=>!e)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-start",children:(0,s.jsx)("span",{children:"Are you sure you want to delete this query set?"})}),d&&(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsx)("span",{className:"text-red-500",children:d})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-gray-500 text-white rounded cursor-pointer",onClick:()=>m.A.hide(),children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-red-600 text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:c,disabled:n,children:"Delete"})]})]})},N=e=>{let{id:t,name:r,setRefetchTask:n}=e,[l,d]=(0,o.useState)(!1),[u,c]=(0,o.useState)(null),[x,g]=(0,o.useState)(r),h=async e=>{if(e.preventDefault(),!x)return;d(!0),c(null);let r=await a.A.doPost({path:"/orgs/".concat(i.A.current().id,"/querysets/").concat(t),data:{name:x}});if(r.error){c(r.error.message),d(!1);return}d(!1),m.A.hide(),n(e=>!e)};return(0,s.jsx)("div",{children:(0,s.jsxs)("form",{onSubmit:h,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"flex items-center justify-start",htmlFor:"name",title:"Enter new name",children:(0,s.jsx)("span",{children:"Enter new name"})}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",required:!0,className:"w-full border border-gray-300 rounded px-2 py-1",value:x,onChange:e=>g(e.target.value)})]}),u&&(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsx)("span",{className:"text-red-500",children:u})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-gray-500 text-white rounded cursor-pointer",onClick:()=>m.A.hide(),children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bgMediumBlue text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:l,children:"Update"})]})]})})},A=()=>{let[e,t]=(0,o.useState)(""),[r,l]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),c=async r=>{var s;if(r.preventDefault(),!(null==e?void 0:e.trim())){u("Please enter a valid organization name"),t("");return}l(!0);let o=i.A.current()?"/orgs/".concat(null===(s=i.A.current())||void 0===s?void 0:s.id):"/orgs/setup";try{let t=await a.A.doPost({path:o,data:{name:e}});if(t.error){u(t.error.message);return}await n.A.fetchCurrentUser();let r=i.A.current();r.name=e,i.A.setCurrent(r),m.A.hide(),window.location.reload()}catch(e){console.error("Error creating organization:",e),u("Unable to create organization")}finally{l(!1)}};return(0,s.jsxs)("form",{onSubmit:c,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"flex items-center justify-start",htmlFor:"orgName",children:(0,s.jsx)("span",{children:"Enter orgnaization name"})}),(0,s.jsx)("input",{type:"text",id:"orgName",required:!0,className:"w-full border border-gray-300 rounded px-2 py-1",value:e,onChange:e=>t(e.target.value)})]}),d&&(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsx)("span",{className:"text-red-500",children:d})}),(0,s.jsx)("div",{className:"flex justify-end gap-2 mt-4",children:(0,s.jsx)("button",{type:"submit",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bgMediumBlue text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:r,children:"Update"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2517,9034,636,6593,8792],()=>t(53949)),_N_E=e.O()}]);
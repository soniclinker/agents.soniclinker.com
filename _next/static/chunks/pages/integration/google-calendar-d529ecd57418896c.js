(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8743],{29743:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var l=t(37876),a=t(74562),r=t(61302),d=t(65259),i=t(43598),n=t(45982),c=t(54587),o=t.n(c),x=t(14e3),h=t(14232),m=t(17082),u=t(75683);let p=()=>{let e=(0,x.useRouter)(),s=i.A.currentId(),[t,c]=(0,h.useState)(!1),[p,b]=(0,h.useState)(null),[j,w]=(0,h.useState)([]),v=async()=>{c(!0),b(null);let e=await d.A.doGet({path:"/orgs/".concat(s,"/googlecalendar/authorize")});if(e.error){console.log("Error:",e.error),b("Something went wrong"),c(!1);return}e.data&&(window.location.href=e.data.url),c(!1)},N=(0,h.useCallback)(async()=>{let e=await d.A.doGet({path:"/orgs/".concat(s,"/googlecalendar/connections")});if(e.error){console.log("Error:",e.error);return}e.data&&w(e.data.data)},[s]);return(0,h.useEffect)(()=>{N()},[N]),(0,l.jsx)("div",{className:"md:p-4",children:(0,l.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-6 text-gray-700",children:[(0,l.jsx)("button",{className:"text-4xl hover:text-gray-800 mb-4 cursor-pointer",onClick:()=>e.push("/settings/?tab=channels-management"),children:(0,l.jsx)(u.eh5,{})}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Calendar"}),(0,l.jsx)("button",{className:"px-4 py-2 bgLightBlue hover:bgMediumBlue text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:t,onClick:()=>v(),children:"Add Calendar"})]}),(0,l.jsx)("div",{children:p&&(0,l.jsx)("p",{className:"text-red-500 text-sm text-center ",children:p})}),(0,l.jsx)("div",{className:"mt-4",children:j&&j.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"hidden md:grid grid-cols-3 bg-gray-100 text-gray-700 font-medium py-3 px-5 sticky top-0",children:[(0,l.jsx)("div",{children:"Name"}),(0,l.jsx)("div",{children:"Email"}),(0,l.jsx)("div",{children:"Actions"})]}),j.map(e=>(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 items-center py-3 px-0 lg:py-4 lg:px-5 border-0 lg:border-b lg:border-gray-100 hover:bg-gray-50",children:[(0,l.jsxs)("div",{className:"md:hidden flex flex-col gap-2 relative rounded shadow border border-slate-200 shadow-base bg-white p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[e.picture?(0,l.jsx)(o(),{width:40,height:40,className:"w-10 h-10 rounded-full",src:e.picture,alt:e.name}):(0,l.jsx)(m.d$e,{className:"w-10 h-10 rounded-full",color:"gray"}),(0,l.jsx)("div",{className:"max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap textSecondary800",title:null==e?void 0:e.name,children:(0,l.jsx)("span",{className:"inline-block font-semibold text-base",children:e.name||"N/A"})})]}),(0,l.jsx)("div",{className:"max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap textPrimary500",title:null==e?void 0:e.email,children:(0,l.jsx)("span",{className:"inline-block",children:e.email})}),(0,l.jsx)("div",{className:"flex absolute right-3 top-5 justify-end space-x-3",children:(0,l.jsx)("button",{className:"textPrimary500 hover:textSecondary700",onClick:()=>a.A.show("Confirm Delete",(0,l.jsx)(g,{id:e.id,handleActionState:N})),children:(0,l.jsx)(n.A,{size:20,className:"cursor-pointer"})})})]}),(0,l.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[e.picture?(0,l.jsx)(o(),{width:40,height:40,className:"w-10 h-10 rounded-full",src:e.picture,alt:e.name}):(0,l.jsx)(m.d$e,{className:"w-10 h-10 rounded-full",color:"gray"}),(0,l.jsx)("div",{className:"max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap textSecondary800",title:null==e?void 0:e.name,children:(0,l.jsx)("span",{className:"inline-block font-semibold",children:e.name||"N/A"})})]}),(0,l.jsx)("div",{className:"hidden md:block max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap textPrimary500",title:null==e?void 0:e.email,children:(0,l.jsx)("span",{className:"textPrimary500",children:e.email})}),(0,l.jsx)("div",{className:"hidden md:block ",children:(0,l.jsx)(r.A,{onClick:()=>a.A.show("Confirm Delete",(0,l.jsx)(g,{id:e.id,handleActionState:N}))})})]},e.id))]})})]})})},g=e=>{let{id:s,handleActionState:t}=e,[r,n]=(0,h.useState)(!1),[c,o]=(0,h.useState)(null),x=async()=>{o(null),n(!0);let e=await d.A.doDelete({path:"/orgs/".concat(i.A.current().id,"/googlecalendar/connections/").concat(s)});if(e.error){o(e.error.message),n(!1);return}n(!1),a.A.hide(),t()};return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{children:"Are you sure you want to delete this calendar?"}),c&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:c}),(0,l.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,l.jsx)("button",{onClick:()=>a.A.hide(),className:"px-4 py-2 text-white rounded-md transition bg-gray-500 cursor-pointer",children:"Cancel"}),(0,l.jsx)("button",{disabled:r,onClick:x,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:r?"Deleting...":"Delete"})]})]})}},45982:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(95551).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},61302:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var l=t(37876);t(14232);var a=t(45982);let r=e=>{let{size:s=20,className:t="",...r}=e;return(0,l.jsx)("button",{type:"button",className:"p-2 text-red-500 hover:text-red-600 cursor-pointer ".concat(t),...r,children:(0,l.jsx)(a.A,{className:"w-5 h-5"})})}},95057:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/integration/google-calendar",function(){return t(29743)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[5711,8585,4e3,636,6593,8792],()=>s(95057)),_N_E=e.O()}]);